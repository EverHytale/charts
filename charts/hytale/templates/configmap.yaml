{{- if .Values.configMap.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "hytale.fullname" . }}-config
  labels:
    {{- include "hytale.labels" . | nindent 4 }}
data:
  server.properties: |
    # Hytale Server Configuration
    # Generated by Helm chart
    
    # Server Settings
    server-name={{ .Values.server.name }}
    max-players={{ .Values.server.maxPlayers }}
    server-port={{ .Values.server.port }}
    
    # Game Settings
    gamemode={{ .Values.server.gameMode }}
    difficulty={{ .Values.server.difficulty }}
    pvp={{ .Values.server.pvp }}
    
    # World Settings
    view-distance={{ .Values.server.viewDistance }}
    {{- if .Values.server.seed }}
    level-seed={{ .Values.server.seed }}
    {{- end }}
    
    # Server Messages
    motd={{ .Values.server.motd }}
    
    # Security
    white-list={{ .Values.server.whitelist }}
    
    # RCON Configuration
    {{- if .Values.server.rcon.enabled }}
    enable-rcon=true
    rcon.port={{ .Values.server.rcon.port }}
    {{- else }}
    enable-rcon=false
    {{- end }}
  
  eula.txt: |
    # By setting eula=true you are indicating your agreement to the EULA
    # https://hytale.com/eula
    eula=true
{{- end }}
